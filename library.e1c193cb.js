!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequire276a;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){r[e]=n},n.parcelRequire276a=a),a("8Tess"),a("jcFG7"),a("87sR3");var s=a("bpxeT"),i=a("2TvXO"),l=a("1h2Gi"),c=a("4Nugj"),o=a("8Tess"),u=a("1rHv3"),f=a("1VFfL"),d=function(e){var n=e.id,t=e.poster_path,r=e.title,a=e.genres,s=e.release_date,i=e.vote_average;document.addEventListener("click",o.default),c.refs.closeModalIcon.addEventListener("click",u.default);var l=function(e){return e.length<=2?e.map((function(e){return e.name})).join(", "):0===e.length?"no genres":e.length>2?e.map((function(e){return e.name})).slice(0,2).join(", ")+", Other":void 0}(a);return'\n    <li class="library__item" data-id="'.concat(n,'">\n            <div class="library__poster">\n                <img src="https://image.tmdb.org/t/p/w500').concat(t,'" alt="').concat(r,'" class="library__image" loading="lazy" data-target="card"/>\n            </div>\n            <div class="library__meta">\n                <p class="library__title" data-target="card">').concat(r,'</p>\n                <p class="library__info" data-target="card">\n                    <span class="library__genre">').concat(l,'</span> |\n                    <span class="library__year">').concat(s.slice(0,4),'</span>\n                    <span class="library__rate">').concat(String(i).slice(0,3),"</span></p>\n            </div>\n        </li>\n    ")},g=new(0,l.FilmsApiService);function p(e){for(var n=0;n<e.length;n+=1)g.getFilmsById(e[n]).then((function(e){c.refs.library.insertAdjacentHTML("beforeend",d(e)),h()}))}function h(){return y.apply(this,arguments)}function y(){return(y=e(s)(e(i).mark((function n(){var t,r;return e(i).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={totalItems:g.totalPages,itemsPerPage:3,visiblePages:5,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"},r=new(e(f))(c.refs.pagination,t),n.next=4,r.on("beforeMove",(function(e){c.refs.library.innerHTML=""}));case 4:return n.next=6,r.on("afterMove",(function(e){g.page=e.page,g.getFilmsById().then((function(e){g.page=1,c.refs.library.innerHTML=d(e.results)}))}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}c=a("4Nugj"),c=a("4Nugj");var m=function(){c.refs.headerWatchedBtn.classList.add("library-header__btn--active")},_=function(){c.refs.headerQueueBtn.classList.add("library-header__btn--active")},v=(c=a("4Nugj"),function(){c.refs.library.innerHTML=""}),b=function(e){return JSON.parse(localStorage.getItem("".concat(e,"Movies")))},L=function(){var e=null;try{e=b("watched")}catch(e){return}return e},T=function(){var e=null;try{e=b("queue")}catch(e){return}return e},M='<image class="message__image" src="https://thumbs.gfycat.com/AccurateUnfinishedBergerpicard-size_restricted.gif"/>',x=L()||[],w=T()||[];null!=x&&0!==x.length||null!=w&&0!==w.length?x.length>0?(m(),p(x)):w.length>0&&(_(),p(w)):(c.refs.message.innerHTML='<p class="message__text">Your library is empty</p>'.concat(M),c.refs.library.innerHTML="",c.refs.pagination.style.display="none");c.refs.headerWatchedBtn.addEventListener("click",(function(e){c.refs.headerQueueBtn.classList.remove("library-header__btn--active"),m(),v(),null==(x=L())||0===x.length?(c.refs.message.innerHTML='<p class="message__text">Your list of watched films is empty</p>'.concat(M),c.refs.library.innerHTML="",c.refs.pagination.style.display="none"):x.length>0&&(c.refs.message.innerHTML="",c.refs.pagination.style.display="flex",p(x))})),c.refs.headerQueueBtn.addEventListener("click",(function(e){_(),c.refs.headerWatchedBtn.classList.remove("library-header__btn--active"),v(),null==(w=T())||0===w.length?(c.refs.message.innerHTML='<p class="message__text">Your queue is empty</p>'.concat(M),c.refs.library.innerHTML="",c.refs.pagination.style.display="none"):w.length>0&&(c.refs.message.innerHTML="",c.refs.pagination.style.display="flex",p(w))})),a("ghnK3"),a("32ZrB"),a("d43SW")}();
//# sourceMappingURL=library.e1c193cb.js.map
