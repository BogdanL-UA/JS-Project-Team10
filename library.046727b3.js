function e(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},t=a.parcelRequire276a;null==t&&((t=function(e){if(e in r)return r[e].exports;if(e in n){var a=n[e];delete n[e];var t={id:e,exports:{}};return r[e]=t,a.call(t.exports,t,t.exports),t.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,a){n[e]=a},a.parcelRequire276a=t),t("lDsUW"),t("2nhTy");var s=t("7me8F"),i=t("krGWQ"),l=t("lDsUW"),d=t("ilvA4"),o=t("fb9GJ");const c=({id:e,poster_path:a,title:r,genres:n,release_date:t,vote_average:s})=>{document.addEventListener("click",l.default),i.refs.closeModalIcon.addEventListener("click",d.default);const o=(e=>e.length<=2?e.map((e=>e.name)).join(", "):0===e.length?"no genres":e.length>2?e.map((e=>e.name)).slice(0,2).join(", ")+", Other":void 0)(n);return`\n    <li class="library__item" data-id="${e}">\n            <div class="library__poster">\n                <img src="https://image.tmdb.org/t/p/w500${a}" alt="${r}" class="library__image" data-target="card"/>\n            </div>\n            <div class="library__meta">\n                <p class="library__title" data-target="card">${r}</p>\n                <p class="library__info" data-target="card">\n                    <span class="library__genre">${o}</span> |\n                    <span class="library__year">${t.slice(0,4)}</span>\n                    <span class="library__rate">${String(s).slice(0,3)}</span></p>\n            </div>\n        </li>\n    `},f=new(0,s.FilmsApiService);function g(e){for(let a=0;a<e.length;a+=1)f.getFilmsById(e[a]).then((e=>{i.refs.library.insertAdjacentHTML("beforeend",c(e)),p()}))}async function p(){const a={totalItems:f.totalPages,itemsPerPage:3,visiblePages:5,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"},r=new(e(o))(i.refs.pagination,a);await r.on("beforeMove",(function(e){i.refs.library.innerHTML=""})),await r.on("afterMove",(function(e){f.page=e.page,f.getFilmsById().then((e=>{f.page=1,i.refs.library.innerHTML=c(e.results)}))}))}i=t("krGWQ"),i=t("krGWQ");const u=()=>{i.refs.headerWatchedBtn.classList.add("library-header__btn--active")},h=()=>{i.refs.headerQueueBtn.classList.add("library-header__btn--active")};i=t("krGWQ");const y=()=>{i.refs.library.innerHTML=""},b=e=>JSON.parse(localStorage.getItem(`${e}Movies`));let _=b("watched"),m=b("queue");null!=_&&0!==_.length||null!=m&&0!==m.length?_.length>0?(u(),g(_)):m.length>0&&(h(),g(m)):(i.refs.message.innerHTML="<p>Ви ще не додали фільми до бібліотеки</p>",i.refs.library.innerHTML="");i.refs.headerWatchedBtn.addEventListener("click",(e=>{i.refs.headerQueueBtn.classList.remove("library-header__btn--active"),u(),y(),_=b("watched"),null==_||0===_.length?(i.refs.message.innerHTML="<p>Ви ще не додали фільми до списку переглянутих</p>",i.refs.library.innerHTML="",i.refs.pagination.style.display="none"):_.length>0&&(i.refs.message.innerHTML="",i.refs.pagination.style.display="flex",g(_))})),i.refs.headerQueueBtn.addEventListener("click",(e=>{h(),i.refs.headerWatchedBtn.classList.remove("library-header__btn--active"),y(),m=b("queue"),null==m||0===m.length?(i.refs.message.innerHTML="<p>Ви ще не додали фільми до черги</p>",i.refs.library.innerHTML="",i.refs.pagination.style.display="none"):m.length>0&&(i.refs.message.innerHTML="",i.refs.pagination.style.display="flex",g(m))})),t("baGT8"),t("ghT7p"),t("6mLAN");
//# sourceMappingURL=library.046727b3.js.map
