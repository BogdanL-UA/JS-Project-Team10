{"mappings":"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","sources":["src/index-library.js","src/js/library/render-library.js","src/js/library/library-buttons-functions.js","src/js/library/clear-container.js","src/js/library/get-from-local-storage.js","src/js/library/on-library-load.js"],"sourcesContent":["// import './js/create-page-home';\n// import './js/create-search-gallery';\nimport './js/open-movie-modal';\nimport './js/pagination';\nimport './js/library/on-library-load';\nimport './js/team-modal';\nimport './js/dark-theme';\n// import './js/scroll';\nimport topUp from './js/top';\n\n// topUp();\n","import { FilmsApiService } from '../api-service';\nimport { refs } from '../refs';\nimport openMovieModal from '../open-movie-modal';\nimport closeMovieModalWindow from '../close-modal-window';\nimport Pagination from 'tui-pagination';\n\nconst generateGenresString = genres => {\n  if (genres.length <= 2) {\n    return genres.map(genre => genre.name).join(', ');\n  } else if (genres.length === 0) {\n    return 'no genres';\n  } else if (genres.length > 2) {\n    return (\n      genres\n        .map(genre => genre.name)\n        .slice(0, 2)\n        .join(', ') + ', Other'\n    );\n  }\n};\n\nconst createLibraryMovieItem = ({\n  id,\n  poster_path,\n  title,\n  genres,\n  release_date,\n  vote_average,\n}) => {\n  document.addEventListener('click', openMovieModal);\n  refs.closeModalIcon.addEventListener('click', closeMovieModalWindow);\n  const genresList = generateGenresString(genres);\n  return `\n    <li class=\"library__item\" data-id=\"${id}\">\n            <div class=\"library__poster\">\n                <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" class=\"library__image\" data-target=\"card\"/>\n            </div>\n            <div class=\"library__meta\">\n                <p class=\"library__title\" data-target=\"card\">${title}</p>\n                <p class=\"library__info\" data-target=\"card\">\n                    <span class=\"library__genre\">${genresList}</span> |\n                    <span class=\"library__year\">${release_date.slice(\n                      0,\n                      4\n                    )}</span>\n                    <span class=\"library__rate\">${String(vote_average).slice(\n                      0,\n                      3\n                    )}</span></p>\n            </div>\n        </li>\n    `;\n};\n\nconst filmsApiService = new FilmsApiService();\n\nfunction renderLibrary(movies) {\n  for (let i = 0; i < movies.length; i += 1)\n    filmsApiService.getFilmsById(movies[i]).then(response => {\n      refs.library.insertAdjacentHTML(\n        'beforeend',\n        createLibraryMovieItem(response)\n      );\n      paginationOnLibrary();\n    });\n        \n\n}\n\n\nasync function paginationOnLibrary() {\n  const options = {\n    totalItems: filmsApiService.totalPages,\n    itemsPerPage: 3,\n    visiblePages: 5,\n    centerAlign: true,\n    firstItemClassName: 'tui-first-child',\n    lastItemClassName: 'tui-last-child',\n  };\n\n  const pagination = new Pagination(refs.pagination, options);\n  // pagination.reset();\n  await pagination.on('beforeMove', function (eventData) {\n    refs.library.innerHTML = '';\n  });\n  \n  await pagination.on('afterMove', function (eventData) {\n    filmsApiService.page = eventData.page;\n    filmsApiService.getFilmsById().then(films => {\n      filmsApiService.page = 1;\n      refs.library.innerHTML = createLibraryMovieItem(films.results);\n    });\n  });\n}\nexport { renderLibrary, paginationOnLibrary };\n","import { refs } from '../refs';\n\nconst activateWatchedBtn = () => {\n  refs.headerWatchedBtn.classList.add('library-header__btn--active');\n};\nconst activateQueueBtn = () => {\n  refs.headerQueueBtn.classList.add('library-header__btn--active');\n};\n\nconst deactivateWatchedBtn = () => {\n  refs.headerWatchedBtn.classList.remove('library-header__btn--active');\n};\n\nconst deactivateQueueBtn = () => {\n  refs.headerQueueBtn.classList.remove('library-header__btn--active');\n};\n\nexport { activateWatchedBtn, activateQueueBtn, deactivateWatchedBtn, deactivateQueueBtn };","import { refs } from '../refs';\n\nconst clearLibraryContainer = () => {\n  refs.library.innerHTML = '';\n};\n\nexport { clearLibraryContainer };\n","const getFromLocalStorage = key =>\n    JSON.parse(localStorage.getItem(`${key}Movies`));\n  \nexport { getFromLocalStorage };","import { renderLibrary } from './render-library';\nimport { refs } from '../refs';\nimport { activateWatchedBtn, activateQueueBtn, deactivateWatchedBtn, deactivateQueueBtn } from './library-buttons-functions';\nimport { clearLibraryContainer } from './clear-container';\nimport { getFromLocalStorage } from './get-from-local-storage';\n\n\n\nlet watchedMovies = getFromLocalStorage('watched');\nlet queueMovies = getFromLocalStorage('queue');\n\n//перевірка local storage при завантаженні сторінки\nif (\n  (watchedMovies == null || watchedMovies.length === 0) &&\n  (queueMovies == null || queueMovies.length === 0)\n) {\n  //в localstorage нічого немає\n  refs.message.innerHTML = '<p>Ви ще не додали фільми до бібліотеки</p>';\n   refs.library.innerHTML = '';\n} else if (watchedMovies.length > 0) {\n  //в localstorage є переглянуті фільми (пріоритет)\n  activateWatchedBtn();\n  renderLibrary(watchedMovies);\n} else if (queueMovies.length > 0) {\n  //в localstorage є фільми в черзі\n  activateQueueBtn();\n  renderLibrary(queueMovies);\n}\n\nconst onWatchedClick = (event) => {\n\n  deactivateQueueBtn();\n  activateWatchedBtn();\n  clearLibraryContainer();\n\n  watchedMovies = getFromLocalStorage('watched');\n\n  if (watchedMovies == null || watchedMovies.length === 0) {\n    refs.message.innerHTML =\n      '<p>Ви ще не додали фільми до списку переглянутих</p>';\n    refs.library.innerHTML = '';\n    refs.pagination.style.display = 'none';\n  } else if (watchedMovies.length > 0) {\n    refs.message.innerHTML = '';\n    refs.pagination.style.display = 'flex';\n    renderLibrary(watchedMovies);\n  }\n};\n\nconst onQueueClick = (event) => {\n\n  activateQueueBtn();\n  deactivateWatchedBtn();\n  clearLibraryContainer();\n\n  queueMovies = getFromLocalStorage('queue');\n\n  if (queueMovies == null || queueMovies.length === 0) {\n    refs.message.innerHTML =\n      '<p>Ви ще не додали фільми до черги</p>';\n    refs.library.innerHTML = '';\n    refs.pagination.style.display = 'none';\n  } else if (queueMovies.length > 0) {\n    refs.message.innerHTML = '';\n     refs.pagination.style.display = 'flex';\n    renderLibrary(queueMovies);\n   \n  }\n}\n\n\n// додаємо прослуховувачі подій на кнопки\nrefs.headerWatchedBtn.addEventListener('click', onWatchedClick);\nrefs.headerQueueBtn.addEventListener('click', onQueueClick);\n"],"names":["parcelRequire","$7me8F","$01ad45f64448961d$var$createLibraryMovieItem","id","poster_path","title","genres","release_date","vote_average","document","addEventListener","$lDsUW","default","$krGWQ","refs","closeModalIcon","$ilvA4","genresList","length","map","genre","name","join","slice","$01ad45f64448961d$var$generateGenresString","String","$01ad45f64448961d$var$filmsApiService","FilmsApiService","$01ad45f64448961d$export$e7d1a4959038c5e5","movies","i","getFilmsById","then","response","library","insertAdjacentHTML","$01ad45f64448961d$export$ddce8262da9035e5","async","options","totalItems","totalPages","itemsPerPage","visiblePages","centerAlign","firstItemClassName","lastItemClassName","pagination","$parcel$interopDefault","$fb9GJ","on","eventData","innerHTML","page","films","results","$e6202b0bb03f24ca$export$cfde98e34fee1ead","headerWatchedBtn","classList","add","$e6202b0bb03f24ca$export$af8f632b06b38e33","headerQueueBtn","$d42d27292484fddb$export$c7bf46721d78d01d","$705bdd19c63c3970$export$602bc7b349337fec","key","JSON","parse","localStorage","getItem","$a4796f1cd8ffc380$var$watchedMovies","$a4796f1cd8ffc380$var$queueMovies","message","event","remove","style","display"],"version":3,"file":"library.046727b3.js.map"}