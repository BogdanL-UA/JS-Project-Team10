{"mappings":"gfAEAA,EAAA,S,WCFA,IAAAC,EAAAD,EAAA,SCAaE,EAAO,CAChBC,QAASC,SAASC,cAAc,kBAChCC,QAASF,SAASC,cAAc,YAChCE,iBAAkBH,SAASC,cAAc,gCACzCG,eAAgBJ,SAASC,cAAc,+B,aDerCI,EAAyB,SAAAC,G,IAC7BC,EAAED,EAAFC,GACAC,EAAWF,EAAXE,YACAC,EAAKH,EAALG,MACAC,EAAMJ,EAANI,OACAC,EAAYL,EAAZK,aACAC,EAAYN,EAAZM,aAEAZ,SAASa,iBAAiB,QAASC,EAAAC,SACnCjB,EAAKkB,eAAeH,iBAAiB,QAASI,uBAC9C,IAAMC,EAzBqB,SAAAR,GAC3B,OAAIA,EAAOS,OAAS,EACXT,EAAOU,KAAI,SAAAC,G,OAASA,EAAMC,I,IAAMC,KAAK,MACjB,IAAlBb,EAAOS,OACT,YACET,EAAOS,OAAS,EAEvBT,EACGU,KAAI,SAAAC,G,OAASA,EAAMC,I,IACnBE,MAAM,EAAG,GACTD,KAAK,MAAQ,eALb,C,CAoBYE,CAAqBf,GACxC,MAAO,4CAGkDgB,OAFlBnB,EAAG,4GAEoCmB,OAArBlB,EAAY,WAGRkB,OAHiBjB,EAAM,6KAKnCiB,OAFYjB,EAAM,yHAGnBiB,OADCR,EAAW,+DAKZQ,OAJAf,EAAaa,MACzC,EACA,GACA,6DAIAE,OAH4BC,OAAOf,GAAcY,MACjD,EACA,GACA,uD,EAMhBI,EAAkB,IAAI,EAAA/B,EAAAgC,iBAE5B,SAASC,EAAcC,GACrB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAOZ,OAAQa,GAAK,EACtCJ,EAAgBK,aAAaF,EAAOC,IAAIE,MAAK,SAAAC,GAC3CrC,EAAKC,QAAQqC,mBACX,YACA/B,EAAuB8B,G,IEzD/B,IAAME,EAAqB,WACzBvC,EAAKK,iBAAiBmC,UAAUC,IAAI,8B,EAEhCC,EAAmB,WACvB1C,EAAKM,eAAekC,UAAUC,IAAI,8B,ECJ9BE,EAAwB,WAC5B3C,EAAKC,QAAQ2C,UAAY,E,ECErBC,EAAsB,SAAAC,G,OAC1BC,KAAKC,MAAMC,aAAaC,QAAQ,GAAOtB,OAAJkB,EAAI,W,EAErCK,EAAgBN,EAAoB,WACpCO,EAAcP,EAAoB,SAKlB,MAAjBM,GAAkD,IAAzBA,EAAc9B,QACxB,MAAf+B,GAA8C,IAAvBA,EAAY/B,OAK3B8B,EAAc9B,OAAS,GAGhCsB,IACAJ,IACAP,EAAcmB,IACLC,EAAY/B,OAAS,IAG9BsB,IACAD,IACAV,EAAcoB,KAbdT,IACA3C,EAAKI,QAAQwC,UAAY,+CAmD3B5C,EAAKK,iBAAiBU,iBAAiB,SApChB,SAACsC,GAEtBC,QAAQC,IAAI,6BFtBZvD,EAAKM,eAAekC,UAAUgB,OAAO,+BEyBrCjB,IAEAI,IAEqB,MAAjBQ,GAAkD,IAAzBA,EAAc9B,OACzCrB,EAAKI,QAAQwC,UACX,uDACOO,EAAc9B,OAAS,IAChCrB,EAAKI,QAAQwC,UAAY,GACzBZ,EAAcmB,G,IAuBlBnD,EAAKM,eAAeS,iBAAiB,SAnBhB,SAACsC,GAClBC,QAAQC,IAAI,2BAEdb,IF7CA1C,EAAKK,iBAAiBmC,UAAUgB,OAAO,+BEgDvCb,IAEmB,MAAfS,GAA8C,IAAvBA,EAAY/B,OACrCrB,EAAKI,QAAQwC,UACX,yCACOQ,EAAY/B,OAAS,IAC9BrB,EAAKI,QAAQwC,UAAY,GACzBZ,EAAcoB,G","sources":["src/index-library.js","src/js/library/render-library.js","src/js/library/library-refs.js","src/js/library/library-buttons-functions.js","src/js/library/clear-containers.js","src/js/library/on-library-load.js"],"sourcesContent":["// import './js/create-page-home';\n// import './js/create-search-gallery';\nimport './js/open-movie-modal';\nimport './js/pagination';\nimport './js/library/on-library-load';\nimport './js/team-modal';\nimport './js/dark-theme';\n// import './js/scroll';\nimport topUp from './js/top';\n\n// topUp();\n","import { FilmsApiService } from '../api-service';\nimport { refs } from './library-refs';\nimport openMovieModal from '../open-movie-modal';\n\nconst generateGenresString = genres => {\n  if (genres.length < 2) {\n    return genres.map(genre => genre.name).join(', ');\n  } else if (genres.length === 0) {\n    return 'no genres';\n  } else if (genres.length > 2) {\n    return (\n      genres\n        .map(genre => genre.name)\n        .slice(0, 2)\n        .join(', ') + ', Other'\n    );\n  }\n};\n\nconst createLibraryMovieItem = ({\n  id,\n  poster_path,\n  title,\n  genres,\n  release_date,\n  vote_average,\n}) => {\n  document.addEventListener('click', openMovieModal);\n  refs.closeModalIcon.addEventListener('click', closeMovieModalWindow);\n  const genresList = generateGenresString(genres);\n  return `\n    <li class=\"library__item\" data-id=\"${id}\">\n            <div class=\"library__poster\">\n                <img src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" class=\"library__image\" data-target=\"card\"/>\n            </div>\n            <div class=\"library__meta\">\n                <p class=\"library__title\" data-target=\"card\">${title}</p>\n                <p class=\"library__info\" data-target=\"card\">\n                    <span class=\"library__genre\">${genresList}</span> |\n                    <span class=\"library__year\">${release_date.slice(\n                      0,\n                      4\n                    )}</span>\n                    <span class=\"library__rate\">${String(vote_average).slice(\n                      0,\n                      3\n                    )}</span></p>\n            </div>\n        </li>\n    `;\n};\n\nconst filmsApiService = new FilmsApiService();\n\nfunction renderLibrary(movies) {\n  for (let i = 0; i < movies.length; i += 1)\n    filmsApiService.getFilmsById(movies[i]).then(response => {\n      refs.library.insertAdjacentHTML(\n        'beforeend',\n        createLibraryMovieItem(response)\n      );\n    });\n}\n\nexport { renderLibrary };\n","export const refs = {\n    library: document.querySelector('.library__list'),\n    message: document.querySelector('.message'),\n    headerWatchedBtn: document.querySelector('.library-header__watched-btn'),\n    headerQueueBtn: document.querySelector('.library-header__queue-btn'),\n}","import { refs } from './library-refs';\n\nconst activateWatchedBtn = () => {\n  refs.headerWatchedBtn.classList.add('library-header__btn--active');\n};\nconst activateQueueBtn = () => {\n  refs.headerQueueBtn.classList.add('library-header__btn--active');\n};\n\nconst deactivateWatchedBtn = () => {\n  refs.headerWatchedBtn.classList.remove('library-header__btn--active');\n};\n\nconst deactivateQueueBtn = () => {\n  refs.headerQueueBtn.classList.remove('library-header__btn--active');\n};\n\nexport { activateWatchedBtn, activateQueueBtn, deactivateWatchedBtn, deactivateQueueBtn };","import { refs } from './library-refs';\n\nconst clearLibraryContainer = () => {\n  refs.library.innerHTML = '';\n};\n\nexport { clearLibraryContainer };\n","import { renderLibrary } from './render-library';\nimport { refs } from './library-refs';\nimport { activateWatchedBtn, activateQueueBtn, deactivateWatchedBtn, deactivateQueueBtn } from './library-buttons-functions';\nimport { clearLibraryContainer } from './clear-containers';\n\nconst getFromLocalStorage = key =>\n  JSON.parse(localStorage.getItem(`${key}Movies`));\n\nlet watchedMovies = getFromLocalStorage('watched');\nlet queueMovies = getFromLocalStorage('queue');\n\n\n//перевірка localstorage при завантаженні сторінки\nif (\n  (watchedMovies == null || watchedMovies.length === 0) &&\n  (queueMovies == null || queueMovies.length === 0)\n) {\n  //в localstorage нічого немає\n  clearLibraryContainer();\n  refs.message.innerHTML = '<p>Ви ще не додали фільми до бібліотеки</p>';\n} else if (watchedMovies.length > 0) {\n  //в localstorage є переглянуті фільми (пріоритет)\n  // console.log(watchedMovies);\n  clearLibraryContainer();\n  activateWatchedBtn();\n  renderLibrary(watchedMovies);\n} else if (queueMovies.length > 0) {\n  //в localstorage є фільми в черзі\n  // console.log(queueMovies);\n  clearLibraryContainer();\n  activateQueueBtn();\n  renderLibrary(queueMovies);\n}\n\nconst onWatchedClick = (event) => {\n\n  console.log('Привіт від кнопки watched');\n\n  deactivateQueueBtn();\n  activateWatchedBtn();\n\n  clearLibraryContainer();\n\n  if (watchedMovies == null || watchedMovies.length === 0) {\n    refs.message.innerHTML =\n      '<p>Ви ще не додали фільми до списку переглянутих</p>';\n  } else if (watchedMovies.length > 0) {\n    refs.message.innerHTML = '';\n    renderLibrary(watchedMovies);\n  }\n};\n\nconst onQueueClick = (event) => {\n    console.log('Привіт від кнопки queue');\n\n  activateQueueBtn();\n  deactivateWatchedBtn();\n\n  clearLibraryContainer();\n\n  if (queueMovies == null || queueMovies.length === 0) {\n    refs.message.innerHTML =\n      '<p>Ви ще не додали фільми до черги</p>';\n  } else if (queueMovies.length > 0) {\n    refs.message.innerHTML = '';\n    renderLibrary(queueMovies);\n  }\n}\n\n// додаємо прослуховувачі подій на кнопки\nrefs.headerWatchedBtn.addEventListener('click', onWatchedClick);\nrefs.headerQueueBtn.addEventListener('click', onQueueClick);\n"],"names":["parcelRequire","$1h2Gi","$cef55ce7d6412c7d$export$21666b427502ea6d","library","document","querySelector","message","headerWatchedBtn","headerQueueBtn","$b64488090ba80634$var$createLibraryMovieItem","param","id","poster_path","title","genres","release_date","vote_average","addEventListener","$8Tess","default","closeModalIcon","closeMovieModalWindow","genresList","length","map","genre","name","join","slice","$b64488090ba80634$var$generateGenresString","concat","String","$b64488090ba80634$var$filmsApiService","FilmsApiService","$b64488090ba80634$export$e7d1a4959038c5e5","movies","i","getFilmsById","then","response","insertAdjacentHTML","$c7ba97f1b2bbd87b$export$cfde98e34fee1ead","classList","add","$c7ba97f1b2bbd87b$export$af8f632b06b38e33","$a597ea69d9e5cdd5$export$c7bf46721d78d01d","innerHTML","$86a9f5b8278c0293$var$getFromLocalStorage","key","JSON","parse","localStorage","getItem","$86a9f5b8278c0293$var$watchedMovies","$86a9f5b8278c0293$var$queueMovies","event","console","log","remove"],"version":3,"file":"library.aafe32eb.js.map"}