!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},t={},a=n.parcelRequire276a;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in t){var n=t[e];delete t[e];var a={id:e,exports:{}};return r[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){t[e]=n},n.parcelRequire276a=a),a("8Tess"),a("jcFG7");var i=a("bpxeT"),s=a("2TvXO"),l=a("1h2Gi"),c=a("4Nugj"),o=a("8Tess"),d=a("1rHv3"),f=a("1VFfL"),u=function(e){var n=e.id,r=e.poster_path,t=e.title,a=e.genres,i=e.release_date,s=e.vote_average;document.addEventListener("click",o.default),c.refs.closeModalIcon.addEventListener("click",d.default);var l=function(e){return e.length<=2?e.map((function(e){return e.name})).join(", "):0===e.length?"no genres":e.length>2?e.map((function(e){return e.name})).slice(0,2).join(", ")+", Other":void 0}(a);return'\n    <li class="library__item" data-id="'.concat(n,'">\n            <div class="library__poster">\n                <img src="https://image.tmdb.org/t/p/w500').concat(r,'" alt="').concat(t,'" class="library__image" data-target="card"/>\n            </div>\n            <div class="library__meta">\n                <p class="library__title" data-target="card">').concat(t,'</p>\n                <p class="library__info" data-target="card">\n                    <span class="library__genre">').concat(l,'</span> |\n                    <span class="library__year">').concat(i.slice(0,4),'</span>\n                    <span class="library__rate">').concat(String(s).slice(0,3),"</span></p>\n            </div>\n        </li>\n    ")},p=new(0,l.FilmsApiService);function g(e){for(var n=0;n<e.length;n+=1)p.getFilmsById(e[n]).then((function(e){c.refs.library.insertAdjacentHTML("beforeend",u(e)),h()}))}function h(){return y.apply(this,arguments)}function y(){return(y=e(i)(e(s).mark((function n(){var r,t;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={totalItems:p.totalPages,itemsPerPage:3,visiblePages:5,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child"},t=new(e(f))(c.refs.pagination,r),n.next=4,t.on("beforeMove",(function(e){c.refs.library.innerHTML=""}));case 4:return n.next=6,t.on("afterMove",(function(e){p.page=e.page,p.getFilmsById().then((function(e){p.page=1,c.refs.library.innerHTML=u(e.results)}))}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}c=a("4Nugj"),c=a("4Nugj");var v=function(){c.refs.headerWatchedBtn.classList.add("library-header__btn--active")},b=function(){c.refs.headerQueueBtn.classList.add("library-header__btn--active")},_=(c=a("4Nugj"),function(){c.refs.library.innerHTML=""}),m=function(e){return JSON.parse(localStorage.getItem("".concat(e,"Movies")))},L=m("watched"),T=m("queue");null!=L&&0!==L.length||null!=T&&0!==T.length?L.length>0?(v(),g(L)):T.length>0&&(b(),g(T)):(c.refs.message.innerHTML="<p>Ви ще не додали фільми до бібліотеки</p>",c.refs.library.innerHTML="");c.refs.headerWatchedBtn.addEventListener("click",(function(e){c.refs.headerQueueBtn.classList.remove("library-header__btn--active"),v(),_(),null==(L=m("watched"))||0===L.length?(c.refs.message.innerHTML="<p>Ви ще не додали фільми до списку переглянутих</p>",c.refs.library.innerHTML="",c.refs.pagination.style.display="none"):L.length>0&&(c.refs.message.innerHTML="",c.refs.pagination.style.display="flex",g(L))})),c.refs.headerQueueBtn.addEventListener("click",(function(e){b(),c.refs.headerWatchedBtn.classList.remove("library-header__btn--active"),_(),null==(T=m("queue"))||0===T.length?(c.refs.message.innerHTML="<p>Ви ще не додали фільми до черги</p>",c.refs.library.innerHTML="",c.refs.pagination.style.display="none"):T.length>0&&(c.refs.message.innerHTML="",c.refs.pagination.style.display="flex",g(T))})),a("ghnK3"),a("32ZrB"),a("d43SW")}();
//# sourceMappingURL=library.ec2875bc.js.map
